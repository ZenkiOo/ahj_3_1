(()=>{"use strict";class t{constructor(t,e){this.board=document.querySelector(`.${t}`),this.cells=[...document.querySelectorAll(`.${e}`)],this.activeCell=null}getRandom(){const t=Math.floor(Math.random()*this.cells.length);t===this.activeCell?this.getRandom():this.activeCell=t}removeGoblin(){this.board.querySelector("#goblin")&&this.board.querySelector("#goblin").remove()}showGoblin(){this.removeGoblin(),this.getRandom();const t=new Image;return t.src="2dbd01ce16c0fa83cb67.png",t.id="goblin",t.classList.add("goblin"),this.cells[this.activeCell].appendChild(t),+this.cells[this.activeCell].dataset.id}}const e=document.querySelector("#app"),s=document.createElement("button");s.classList.add("start_btn"),s.textContent="start",e.appendChild(s);const i=document.createElement("p");i.classList.add("score"),i.textContent="attempts left: 5",e.appendChild(i);const n=document.createElement("p");n.classList.add("win_score"),n.textContent="score: 0",e.appendChild(n);const o=document.createElement("div");o.classList.add("board"),e.appendChild(o);let l=null;for(let t=0;t<16;t++)l=document.createElement("div"),l.classList.add("cell"),l.setAttribute("data-id",t),o.appendChild(l);(new class{constructor(){this.startBtn=document.querySelector(".start_btn"),this.score=document.querySelector(".score"),this.winScore=document.querySelector(".win_score"),this.randomize=new t("board","cell"),this.idx=0,this.scoreCount=0,this.runTimer=null,this.isRunning=!1,this.goblinIdx=null,this.step=!1}addListeners(){this.startBtn.addEventListener("click",(()=>{this.start()})),[...document.querySelectorAll(".cell")].forEach((t=>{t.addEventListener("click",(t=>this.onMouseClick(t)))}))}startGame(){this.addListeners()}onMouseClick(t){this.step||+t.target.closest(".cell").dataset.id===this.goblinIdx&&(this.idx-=1,this.scoreCount+=1,document.getElementById("goblin").remove(),this.step=!0)}start(){this.isRunning?this.stop():(this.isRunning=!0,this.runTimer=setInterval((()=>{this.goblinIdx=this.randomize.showGoblin(),this.idx+=1,this.score.textContent="attempts left: "+(6-this.idx),this.winScore.textContent=`score: ${this.scoreCount}`,this.step=!1,this.idx>5&&this.stop()}),1e3))}stop(){this.isRunning&&(clearInterval(this.runTimer),this.isRunning=!1,this.idx=0,this.scoreCount=0)}}).startGame()})();